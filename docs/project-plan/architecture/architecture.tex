%!TEX program=xelatex
%!TEX spellcheck = en_GB
\documentclass[final]{report}
\input{../../.library/preamble.tex}
\input{../../.library/style.tex}
\addbibresource{../../.library/bibliography.bib}
\begin{document}
\chapter{Architecture}
The system will be divided in several separate entities, in \cref{fig:system-architecture} a simple schematic view is shown.

\begin{figure}[H]
	\centering
	\subimport{resources/}{system-architecture.tikz}
	\caption{System Architecture}
	\label{fig:system-architecture}
\end{figure}

\section{Track Sensor Controller}
Track is the entity that contains the sensors $S_{n,w}$, $S_{n,m}$, $S_{n,e}$ (where $n = 1,2,3,..$).
This unit determines if there is a train on the track and whenever it is entering or leaving.
It has one boolean output signal, $train\_on\_track$.

Two units of this type will be in the system.
Their outputs will be put through an OR gate.
\section{Barrier Controller}
This unit will control the barriers opening and closing.
It will communicate with the Track Sensor Controller to see if there is any reason to change it's state, it mainly reacts to $train\_on\_track$.
It will signal it's own state to the Bell Controller, using signal $barrier_status$.

One unit of this type will be in the system.
\section{Light Controller}
This unit will control the lights.
It will orchestrate the blink controllers and communicate it's own status toward the Bell Controller, using signal $light_status$.

One unit of this type will be in the system.
\section{Blink Controller}
This unit will control the blinking of the lights.
This is put in a separate unit to keep each unit simpler.

Each light set will have it's own blink controller, which for now is only one.
\section{Bell Controller}
This unit directly controls the bell.
It gets information from both the Barrier Controller and the Light Controller.
It sends it's own status using $bell\_status$ toward the Light Controller and the Barrier Controller.

One unit of this type will be in the system.

\end{document}